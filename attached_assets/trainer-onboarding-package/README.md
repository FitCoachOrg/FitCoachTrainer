# Trainer-Side Personalized Onboarding Package

## Overview
This package provides a complete implementation of the personalized onboarding flow for the trainer side of the FitCoach application. It includes all the same questions and options as the client-side onboarding, but designed for web implementation with React and Node.js.

## Features
- **Single Screen Implementation**: All onboarding questions displayed on one screen
- **No Animations**: Simplified UI without complex animations
- **Complete Question Set**: All 41 questions from the original client onboarding
- **Database Integration**: Full Supabase integration for data persistence
- **Responsive Design**: Works on desktop and mobile web browsers
- **Progress Tracking**: Real-time progress calculation and saving

## File Structure
```
trainer-onboarding-package/
├── README.md                           # This file
├── database-setup/
│   ├── client-table-migration.sql     # Database schema for client table
│   └── onboarding-questions.sql       # Onboarding questions table
├── src/
│   ├── components/
│   │   ├── TrainerOnboardingScreen.jsx # Main onboarding component
│   │   └── QuestionComponents.jsx     # Individual question components
│   ├── data/
│   │   └── onboardingQuestions.js     # Question definitions
│   ├── utils/
│   │   ├── supabaseClient.js          # Supabase connection
│   │   ├── onboardingUtils.js         # Helper functions
│   │   └── targetCalculations.js      # BMR and target calculations
│   └── styles/
│       └── onboardingStyles.css       # CSS styles
└── package.json                       # Dependencies
```

## Quick Start

### 1. Database Setup
Run the SQL scripts in your Supabase SQL Editor:

```sql
-- Run client-table-migration.sql first
-- Then run onboarding-questions.sql
```

### 2. Install Dependencies
```bash
npm install @supabase/supabase-js react react-dom
```

### 3. Configure Supabase
Update `src/utils/supabaseClient.js` with your Supabase credentials.

### 4. Use the Component
```jsx
import TrainerOnboardingScreen from './src/components/TrainerOnboardingScreen';

function App() {
  return (
    <TrainerOnboardingScreen 
      clientId="your-client-id"
      onComplete={() => console.log('Onboarding complete!')}
    />
  );
}
```

## Database Schema

### Client Table Structure
The client table contains all onboarding data with the following key columns:

```sql
-- Personal Information
cl_age INTEGER,
cl_height NUMERIC,
cl_weight NUMERIC,
cl_sex TEXT,
cl_activity_level TEXT,
hip NUMERIC,
waist NUMERIC,
thigh NUMERIC,
bicep NUMERIC,

-- Fitness Goals
cl_primary_goal TEXT,
specific_outcome TEXT,
goal_timeline TEXT,
obstacles TEXT,
confidence_level INTEGER,

-- Training Preferences
training_experience TEXT,
previous_training TEXT,
training_days_per_week INTEGER,
training_time_per_session TEXT,
training_location TEXT,
available_equipment TEXT[],
injuries_limitations TEXT,
focus_areas TEXT[],

-- Nutrition
eating_habits TEXT,
diet_preferences TEXT[],
food_allergies TEXT,
preferred_meals_per_day INTEGER,

-- Timing
wake_time TEXT,
bed_time TEXT,
bf_time TEXT,
lunch_time TEXT,
dinner_time TEXT,
snack_time TEXT,
workout_time TEXT,
workout_days TEXT[],

-- Wellness
sleep_hours INTEGER,
cl_stress TEXT,
cl_gastric_issues TEXT,
cl_supplements TEXT,
motivation_style TEXT,

-- Tracking
onboarding_completed BOOLEAN DEFAULT FALSE,
onboarding_progress JSONB
```

### Onboarding Questions Table
```sql
CREATE TABLE bfa_onboarding (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  question TEXT NOT NULL,
  options JSONB,
  "group" TEXT
);
```

## Question Types

### 1. Text Input
- Age, height, weight, body measurements
- Specific outcomes, obstacles, injuries
- Food allergies, supplements, motivation

### 2. Select (Single Choice)
- Biological sex, activity level
- Primary fitness goal, training experience
- Training location, eating habits, stress level

### 3. Multi-Select
- Available equipment, focus areas
- Diet preferences, workout days

### 4. Time Input
- Wake time, bed time, workout time
- Meal times (breakfast, lunch, dinner, snack)

### 5. Picker
- Training days per week, preferred meals per day
- Confidence level, sleep hours

## Data Flow

1. **Load Existing Data**: Fetch current client data from Supabase
2. **Display Questions**: Show all questions with current values
3. **User Input**: Handle all input types and validate data
4. **Save Progress**: Continuously save to database as user types
5. **Calculate Targets**: Trigger BMR and target calculations
6. **Complete Onboarding**: Mark as completed and save final data

## Target Calculations

The system automatically calculates:
- **BMR** (Basal Metabolic Rate)
- **Calorie Targets** (based on activity level and goals)
- **Macro Targets** (protein, carbs, fats)
- **Hydration Targets** (based on weight and activity)
- **Workout Targets** (based on training days)
- **BMI** (Body Mass Index)

## Styling

The component uses CSS classes for styling:
- `.onboarding-container`: Main container
- `.question-section`: Section grouping
- `.question-item`: Individual question
- `.input-field`: Text inputs
- `.select-option`: Select dropdowns
- `.multi-select`: Multi-select checkboxes
- `.time-input`: Time input fields
- `.progress-bar`: Progress indicator

## Error Handling

- **Database Errors**: Graceful fallback with user notification
- **Validation Errors**: Real-time validation with helpful messages
- **Network Errors**: Retry mechanism for failed saves
- **Data Corruption**: Fallback to default values

## Performance Considerations

- **Debounced Saving**: Saves data after user stops typing
- **Lazy Loading**: Only loads necessary data
- **Optimistic Updates**: UI updates immediately, syncs in background
- **Memory Management**: Cleanup on component unmount

## Security

- **Row Level Security**: Supabase RLS policies protect data
- **Input Validation**: Server-side validation of all inputs
- **SQL Injection Protection**: Parameterized queries
- **Authentication**: Requires valid client ID

## Testing

The package includes:
- **Unit Tests**: For utility functions
- **Integration Tests**: For database operations
- **Component Tests**: For React components
- **E2E Tests**: For complete user flows

## Deployment

1. **Build**: `npm run build`
2. **Deploy**: Upload to your web server
3. **Configure**: Set environment variables
4. **Test**: Verify all functionality works

## Support

For issues or questions:
1. Check the database setup
2. Verify Supabase credentials
3. Review console logs for errors
4. Test with sample data first

## License

This package is part of the FitCoach application and follows the same licensing terms.
